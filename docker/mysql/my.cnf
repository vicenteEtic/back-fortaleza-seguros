[mysqld]
# --- LOG GERAL ---
general_log = 1
general_log_file = /var/lib/mysql/general.log

# --- TIMEOUTS E CONEXÕES ---
max_connections = 1000             # número seguro para muitos usuários
wait_timeout = 28800               # 8 horas
interactive_timeout = 28800        # 8 horas
net_read_timeout = 300             # 5 minutos
net_write_timeout = 300            # 5 minutos
innodb_lock_wait_timeout = 120     # 2 minutos, para evitar deadlocks longos

# --- BUFFER E CACHE PARA GRANDES QUANTIDADES DE DADOS ---
innodb_buffer_pool_size = 8G       # ajuste conforme RAM disponível
innodb_log_file_size = 512M
innodb_log_buffer_size = 128M
tmp_table_size = 256M
max_heap_table_size = 256M
bulk_insert_buffer_size = 256M
innodb_flush_log_at_trx_commit = 2  # bom equilíbrio entre performance e segurança
innodb_flush_method = O_DIRECT

# --- OUTRAS OTIMIZAÇÕES ---
innodb_file_per_table = 1          # tabelas separadas para melhor gerenciamento
skip_name_resolve = 1              # melhora performance de conexões
